# iOS GPS 수집 고려사항

## 🚨 GPS 방식의 치명적 한계 (iOS 기준)

### 백그라운드 동작 제약

- **Always 권한 필요**: 교인이 "항상 허용"해야만 백그라운드 추적 가능
- **앱 종료 시 중단**: 교인이 앱을 스와이프로 종료하면 위치 추적 완전 중단
- **배터리 소모 큰데도 불안정**: 지속 추적해도 iOS가 임의로 앱 종료 가능

### 주기적 수집의 현실

```
❌ 불가능: 30분마다 정확히 위치 수집
❌ 불가능: 교인이 앱 안 열어도 자동 동작  
❌ 불가능: 앱 강제 종료 후에도 계속 추적
```

### App Store 심사 위험

- 단순 위치 추적 목적 앱은 **거절 가능성 높음**
- 교회용/종교단체용은 **자체 배포 권장**

---

## 🍎 iOS GPS 예배출석 대안 방법들

### 💡 스마트 알림 전략

### 1️⃣ 예배 시간 기반 로컬 알림

```
📅 예배 일정에 맞춘 알림 설정:
├── 주일 오전 10:30 "⛪ 주일 1부 예배 출석체크"
├── 주일 오후 14:00 "⛪ 주일 2부 예배 출석체크"  
├── 수요일 19:30 "🙏 수요기도회 출석체크"
└── 금요일 20:00 "✨ 금요찬양예배 출석체크"

🎯 알림 탭 → 앱 실행 → GPS 위치 수집
```

**장점:**

- iOS에서 완벽 지원되는 네이티브 기능
- 배터리 소모 거의 없음
- 정확한 시간에 교인 액션 유도
- 고령층도 쉽게 사용 가능

**구현 팁:**

- 알림 허용 권한 필수 획득
- 교회 예배 일정 연동으로 자동 스케줄링
- 지각 방지용 10분 전 예고 알림 추가

### 2️⃣ 위치 기반 지오펜싱 알림

```
⛪ 교회 건물/부지 영역 설정:
└── 반경 200m 지오펜스 생성
    ├── 진입 시: "🙏 교회에 오신 것을 환영합니다"
    ├── 체류 중: "⏰ 곧 예배시간입니다"
    └── 이탈 시: 예배출석 기록 마무리
```

**장점:**

- 백그라운드에서도 동작 (Always 권한 필요)
- 교인이 교회에 도착하면 자동 알림
- 앱 강제 종료되어도 지오펜스는 살아있음

### 3️⃣ 예배 전후 반복 알림

```
⏰ 스마트 예배 알림 시스템:
├── 1차: 예배 30분 전 "곧 예배시간입니다"
├── 2차: 예배 시작 시 "⛪ 예배출석체크 하기"
├── 3차: 10분 후 "📱 출석체크를 놓치셨나요?"
└── 4차: 예배 후 "🙏 은혜로운 예배 감사합니다"
```

### 🎮 교인 경험 최적화

### 4️⃣ iOS 위젯 활용

```
📱 홈 화면 위젯 배치:
┌─────────────────────┐
│  ⛪ 예배출석         │
│  다음 예배: 주일 1부   │
│  시간: 10:30 (30분 후)│
│  [출석하기] 버튼      │
└─────────────────────┘
```

**장점:**

- 앱 실행 없이도 예배 일정 확인
- 원탭으로 즉시 예배출석
- 시각적으로 놓치기 어려움

### 5️⃣ Siri Shortcuts 음성 명령

```
🗣️ 음성 명령 설정:
├── "예배 출석해줘" → 앱 실행 + GPS 수집
├── "교회 출석" → 현재 위치 기반 출석
├── "주일예배 출석" → 주일예배 출석체크
└── "소그룹 출석" → 소그룹 모임 출석
```

### 6️⃣ Apple Watch 연동

```
⌚ 워치 앱 기능:
├── 예배 시간 진동 알림
├── 워치에서 원탭 예배출석  
├── GPS는 iPhone으로 자동 수집
└── 완료 시 "은혜롭습니다" 메시지
```

### 🔧 하이브리드 구현 전략

### 📋 단계별 구현 플랜

```
Phase 1: 기본 알림 시스템
├── 로컬 알림으로 예배 시간 안내
├── 알림 탭하면 앱에서 GPS 수집
└── 수동 백업: QR코드 병행

Phase 2: 스마트 기능 추가  
├── 지오펜싱으로 교회 진입 감지
├── 위젯으로 편의성 향상
└── Siri Shortcuts 음성 지원

Phase 3: 고도화
├── Apple Watch 연동
├── 가족 단위 출석 관리
└── 자동 예배 일정 동기화
```

### 💪 교인 참여 유도 방법

```
🎁 영적 인센티브 설계:
├── 연속 예배출석 기념 배지
├── 월별 예배출석률 개인 통계  
├── 소그룹별 출석률 현황
└── 모범 출attend 교인 감사 인사

📊 목양 관리 도구:
├── 개인별 예배출석 패턴 분석
├── 장기 결석 교인 자동 알림
├── 새가족 출석률 모니터링
└── 부서별/연령별 출석 통계
```

---

## 📱 iOS 특수 고려사항

### 권한 설정 요구사항

1. **위치 접근 권한 (Location)**  
   - `WhenInUse` 또는 `Always` 권한 필요
   - 사용자 동의 후에만 위치 정보 수집 가능

2. **알림 권한 (Notifications)**
   - 로컬 알림을 위한 권한 필요
   - 푸시 알림을 위한 APNs 설정 필요

3. **백그라운드 실행 권한**
   - 백그라운드 위치 업데이트를 위한 설정 필요
   - iOS 13 이상에서는 `backgroundModes` 설정 필요

### 배터리 효율성 고려

- 주기적인 위치 수집은 배터리 소모가 큼
- GPS 추적 간격을 조정하여 배터리 절약 가능
- 백그라운드 실행 시 최소한의 리소스 사용으로 제한

### App Store 심사 가이드

1. **위치 기반 서비스**  
   - 위치 데이터 수집 목적 명확히 설명 필요
   - 개인정보 처리방침에 위치 정보 사용 내용 포함

2. **기타 요구사항**
   - 교회 관련 기능 설명 및 사용자 인터페이스 설명
   - 예배 시간 설정과 출석 체크의 정확성 보장
